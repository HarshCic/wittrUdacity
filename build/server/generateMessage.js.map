{"version":3,"sources":["generateMessage.js"],"names":[],"mappings":";;;;;;;;;kBAAe,IAAI;;;;sBACO,QAAQ;;;;kCACf,sBAAsB;;;;sBACtB,UAAU;;;;;AAG7B,IAAM,KAAK,GAAG,CACZ,EAAC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,YAAY,EAAC,EACpC,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,eAAe,EAAC,EACxC,EAAC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,cAAc,EAAC,EACtC,EAAC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,WAAW,EAAC,EAClC,EAAC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,WAAW,EAAC,EAClC,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,eAAe,EAAC,EACxC,EAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,cAAc,EAAC,EACxC,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,cAAc,EAAC,CACxC,CAAC;;AAEF,IAAM,MAAM,GAAG,yBAAc,CAAC,CAAC,CAAC;AACzB,IAAM,aAAa,GAAG,IAAI,OAAO,CAAC,UAAA,OAAO,EAAI;AAClD,QAAM,CAAC,IAAI,CAAC,gBAAG,gBAAgB,CAAC,SAAS,GAAG,WAAW,CAAC,EAAE,OAAO,CAAC,CAAC;CACpE,CAAC,CAAC;;;;AAEI,SAAS,eAAe,GAAG;AAChC,MAAM,OAAO,GAAG,EAAE,CAAC;AACnB,MAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;AAC7D,MAAI,KAAK,YAAA,CAAC;;AAEV,MAAI,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,EAAE;AACvB,SAAK,GAAG,oBAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,oBAAO,MAAM,CAAC,CAAC,CAAC;GAC3D;;AAED,SAAO,CAAC,EAAE,GAAG,MAAM,CAAC,MAAM,CAAC,qCAAO,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;AACxE,SAAO,CAAC,MAAM,GAAG,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC;AAC3C,SAAO,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACzB,SAAO,CAAC,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;AACxC,SAAO,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,qCAAO,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;;AAEnE,MAAI,KAAK,EAAE;AACT,WAAO,CAAC,KAAK,gBAAc,KAAK,CAAC,IAAI,SAAI,KAAK,CAAC,MAAM,SAAI,KAAK,CAAC,EAAE,SAAI,KAAK,CAAC,MAAM,AAAE,CAAC;GACrF;;AAED,SAAO,OAAO,CAAC;CAChB","file":"generateMessage.js","sourcesContent":["import fs from 'fs';\r\nimport markovCreator from 'markov';\r\nimport random from 'lodash/number/random';\r\nimport photos from './photos';\r\n\r\n// names generated by chance.js\r\nconst users = [\r\n  {avatar: \"marc\", name: \"Marc Stone\"},\r\n  {avatar: \"ellen\", name: \"Ellen Clayton\"},\r\n  {avatar: \"ruth\", name: \"Ruth Maxwell\"},\r\n  {avatar: \"ray\", name: \"Ray Scott\"},\r\n  {avatar: \"sam\", name: \"Sam Munoz\"},\r\n  {avatar: \"craig\", name: \"Craig Robbins\"},\r\n  {avatar: \"lillie\", name: \"Lillie Wolfe\"},\r\n  {avatar: \"susan\", name: \"Susan Keller\"}\r\n];\r\n\r\nconst markov = markovCreator(3);\r\nexport const generateReady = new Promise(resolve => {\r\n  markov.seed(fs.createReadStream(__dirname + '/seed.txt'), resolve);\r\n});\r\n\r\nexport function generateMessage() {\r\n  const message = {};\r\n  const user = users[Math.floor(Math.random() * users.length)];\r\n  let image;\r\n\r\n  if (Math.random() < 0.2) {\r\n    image = photos[Math.floor(Math.random() * photos.length)];\r\n  }\r\n\r\n  message.id = Number(String(random(1, 10000)) + Date.now()).toString(36);\r\n  message.avatar = '/avatars/' + user.avatar;\r\n  message.name = user.name;\r\n  message.time = new Date().toISOString();\r\n  message.body = markov.fill(markov.pick(), random(3, 15)).join(' ');\r\n  \r\n  if (image) {\r\n    message.photo = `/photos/${image.farm}-${image.server}-${image.id}-${image.secret}`;\r\n  }\r\n\r\n  return message;\r\n}"]}